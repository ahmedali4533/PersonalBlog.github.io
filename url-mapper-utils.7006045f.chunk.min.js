(self.webpackJsonp__wix_thunderbolt_app = self.webpackJsonp__wix_thunderbolt_app || []).push([
    [482], {
        5755: function(n, e, r) {
            "use strict";
            r.r(e), r.d(e, {
                PageIdentifierType: function() {
                    return V
                },
                TpaPageIds: function() {
                    return t
                },
                UrlMappingsKeys: function() {
                    return i
                },
                buildCustomUrlValidators: function() {
                    return Z
                },
                buildCustomizedUrl: function() {
                    return nn
                },
                exactVariablePattern: function() {
                    return l
                },
                getAllSubMappings: function() {
                    return B
                },
                getCustomizedUrlSegments: function() {
                    return dn
                },
                getDefaultMapping: function() {
                    return _n
                },
                getMainUrlMappingSchemaBySubMappingKey: function() {
                    return F
                },
                getMappingVariables: function() {
                    return un
                },
                getMatchedMapping: function() {
                    return pn
                },
                getRequiredVariables: function() {
                    return j
                },
                getSubMapping: function() {
                    return L
                },
                getSubMappingsByUrlMappingKey: function() {
                    return N
                },
                getSubUrlMappings: function() {
                    return yn
                },
                getTpaPageIdByUrlMappingKey: function() {
                    return q
                },
                getUrlMapping: function() {
                    return Y
                },
                getUrlMappingVariablesSchema: function() {
                    return C
                },
                getUrlMappingVariablesSchemaByKey: function() {
                    return D
                },
                getUrlPageId: function() {
                    return bn
                },
                getUrlSegmentsValidators: function() {
                    return fn
                },
                insertMainMappingToSubMappings: function() {
                    return On
                },
                isMappingExists: function() {
                    return vn
                },
                isSubMappingsKey: function() {
                    return G
                },
                itemDataValidator: function() {
                    return W
                },
                itemDataValidatorError: function() {
                    return Q
                },
                keyValidator: function() {
                    return J
                },
                keyValidatorError: function() {
                    return z
                },
                legacyBlog: function() {
                    return v
                },
                lowerCaseMapping: function() {
                    return Mn
                },
                mainMappingKey: function() {
                    return A
                },
                mainMappingVariable: function() {
                    return U
                },
                paramValidatorError: function() {
                    return K
                },
                placeholderPattern: function() {
                    return s
                },
                prefix: function() {
                    return a
                },
                requiredVariablesValidator: function() {
                    return H
                },
                requiredVariablesValidatorError: function() {
                    return X
                },
                slugRegex: function() {
                    return c
                },
                suffix: function() {
                    return o
                },
                trailingSlashesPattern: function() {
                    return g
                },
                urlMappingsArrayToObject: function() {
                    return Tn
                },
                validBaseUrl: function() {
                    return d
                },
                variablePattern: function() {
                    return p
                },
                verticalsMapping: function() {
                    return x
                },
                wildCardPattern: function() {
                    return f
                }
            });
            var t, i, u, a = "{{",
                o = "}}",
                p = a + "(.*?)" + o,
                l = /^{{(.*?)}}$/,
                s = "[" + a + o + "]",
                g = /^\/|\/$/g,
                c = /{{slug}}/gi,
                f = "([^/]+)",
                d = "https://baseUrl",
                v = {
                    slugSegments: ["legacyYear", "legacyMonth", "legacyDay", "slug"],
                    basicSlug: "{{slug}}",
                    regexes: ["\\d{4}/\\d{2}/{{slug}}", "\\d{4}/\\d{2}/\\d{2}/{{slug}}"],
                    mappings: ["{{legacyYear}}/{{legacyMonth}}/{{slug}}", "{{legacyYear}}/{{legacyMonth}}/{{legacyDay}}/{{slug}}"]
                };
            ! function(n) {
                n.product_page = "product_page", n.blog = "blog", n.post = "post", n.forum = "forum", n.group = "group"
            }(t || (t = {})),
            function(n) {
                n.PRODUCT_PAGE = "wix.stores.sub_pages.product", n.BLOG_POST = "wix.blog.sub_pages.post", n.BLOG_POST_EDIT = "wix.blog.sub_pages.post.edit", n.BLOG_CATEGORY = "wix.blog.sub_pages.category", n.FORUM_CATEGORY = "wix.forum.sub_pages.category", n.FORUM_CATEGORY_PAGINATION = "wix.forum.sub_pages.category.pagination", n.FORUM_CATEGORY_CREATE_POST = "wix.forum.sub_pages.category.create-post", n.FORUM_CATEGORY_CREATE_QUESTION = "wix.forum.sub_pages.category.create-question", n.FORUM_POST = "wix.forum.sub_pages.post", n.FORUM_POST_EDIT = "wix.forum.sub_pages.post.edit", n.FORUM_POST_PAGINATION = "wix.forum.sub_pages.post.pagination", n.FORUM_POST_DEEP_LINK_DATA = "wix.forum.sub_pages.post.deep-link-data", n.FORUM_POST_PAGINATION_AND_DEEP_LINK_DATA = "wix.forum.sub_pages.post.pagination-and-deep-link-data", n.GROUP = "wix.group.sub_page.group", n.GROUP_POST = "wix.group.sub_page.post"
            }(i || (i = {}));
            var b, _, m, O, y, M, T, P, R, E = ((u = {})[i.PRODUCT_PAGE] = {
                    variables: ["slug"],
                    required: ["slug"]
                }, u),
                A = "main-mapping",
                U = "{{" + A + "}}",
                w = ((b = {})[i.BLOG_POST] = {
                    variables: ["slug"],
                    required: ["slug"],
                    subMappings: (_ = {}, _[i.BLOG_POST_EDIT] = {
                        defaultMapping: U + "/edit"
                    }, _)
                }, b),
                S = ((m = {})[i.BLOG_CATEGORY] = {
                    variables: ["slug"],
                    required: ["slug"],
                    defaultPrefix: "categories"
                }, m),
                h = ((O = {})[i.FORUM_POST] = {
                    variables: ["categorySlug", "postSlug"],
                    required: ["categorySlug", "postSlug"],
                    subMappings: (y = {}, y[i.FORUM_POST_EDIT] = {
                        defaultMapping: U + "/edit"
                    }, y[i.FORUM_POST_PAGINATION] = {
                        required: ["page"],
                        defaultMapping: U + "/p-{{page}}"
                    }, y[i.FORUM_POST_DEEP_LINK_DATA] = {
                        required: ["deepLinkData"],
                        defaultMapping: U + "/dl-{{deepLinkData}}"
                    }, y[i.FORUM_POST_PAGINATION_AND_DEEP_LINK_DATA] = {
                        required: ["page", "deepLinkData"],
                        defaultMapping: U + "/p-{{page}}/dl-{{deepLinkData}}"
                    }, y)
                }, O[i.FORUM_CATEGORY] = {
                    variables: ["slug"],
                    required: ["slug"],
                    subMappings: (M = {}, M[i.FORUM_CATEGORY_CREATE_POST] = {
                        defaultMapping: U + "/create-post"
                    }, M[i.FORUM_CATEGORY_CREATE_QUESTION] = {
                        defaultMapping: U + "/create-question"
                    }, M[i.FORUM_CATEGORY_PAGINATION] = {
                        required: ["page"],
                        defaultMapping: U + "/p-{{page}}"
                    }, M)
                }, O),
                I = ((T = {})[i.GROUP] = {
                    variables: ["groupId", "tabName"],
                    required: ["groupId", "tabName"],
                    subMappings: (P = {}, P[i.GROUP_POST] = {
                        required: ["postId"],
                        defaultMapping: U + "/{{postId}}"
                    }, P)
                }, T),
                x = ((R = {})[t.product_page] = E, R[t.post] = w, R[t.blog] = S, R[t.forum] = h, R[t.group] = I, R),
                k = r(1191),
                G = function(n) {
                    return Object.values(C()).some((function(e) {
                        var r;
                        return Boolean(null === (r = null == e ? void 0 : e.subMappings) || void 0 === r ? void 0 : r[n])
                    }))
                },
                C = function() {
                    return Object.values(x).reduce((function(n, e) {
                        return (0, k.pi)((0, k.pi)({}, n), e)
                    }), {}) || {}
                },
                D = function(n) {
                    var e = C()[n];
                    return !e && G(n) && console.warn("You cannot get variables schema for subMappings key (" + n + ")."), e
                },
                q = function(n) {
                    return Object.entries(x).filter((function(e) {
                        var r = (0, k.CR)(e, 2)[1];
                        return Object.keys(r).includes(n)
                    })).map((function(n) {
                        return (0, k.CR)(n, 1)[0]
                    }))[0]
                },
                B = function() {
                    return Object.values(C()).reduce((function(n, e) {
                        return (0, k.pi)((0, k.pi)({}, n), null == e ? void 0 : e.subMappings)
                    }), {})
                },
                N = function(n) {
                    var e, r;
                    return (null === (r = null === (e = C()) || void 0 === e ? void 0 : e[n]) || void 0 === r ? void 0 : r.subMappings) || {}
                },
                F = function(n) {
                    return Object.entries(C()).find((function(e) {
                        var r, t = (0, k.CR)(e, 2),
                            i = (t[0], t[1]);
                        return Boolean(null === (r = null == i ? void 0 : i.subMappings) || void 0 === r ? void 0 : r[n])
                    }))
                },
                L = function(n) {
                    var e, r, t;
                    return null === (t = null === (r = null === (e = F(n)) || void 0 === e ? void 0 : e[1]) || void 0 === r ? void 0 : r.subMappings) || void 0 === t ? void 0 : t[n]
                },
                j = function(n) {
                    var e, r, t, i = [];
                    if (G(n)) {
                        var u = (0, k.CR)(F(n), 2),
                            a = (u[0], u[1]);
                        i.push.apply(i, (0, k.fl)((null == a ? void 0 : a.required) || [], (null === (r = null === (e = null == a ? void 0 : a.subMappings) || void 0 === e ? void 0 : e[n]) || void 0 === r ? void 0 : r.required) || []))
                    } else i.push.apply(i, (0, k.fl)((null === (t = D(n)) || void 0 === t ? void 0 : t.required) || []));
                    return i
                },
                V = {
                    unknown: "unknown",
                    tpaPageId: "tpaPageId",
                    pageId: "pageId"
                },
                Y = function(n, e) {
                    var r, t;
                    return void 0 === e && (e = ""), null === (t = null === (r = null == n ? void 0 : n.main) || void 0 === r ? void 0 : r.find) || void 0 === t ? void 0 : t.call(r, (function(n) {
                        return n.key === e
                    }))
                },
                K = function(n, e) {
                    return new Error("Url Mappings Error - [" + n + "]: " + e)
                },
                $ = Object.values(i),
                z = K("key", "must be one of: " + $.toString()),
                J = function(n) {
                    if ("string" !== typeof n || !$.includes(n)) return z
                },
                Q = K("itemData", 'must be on object with string as value, for example: { "slug": "shoes" }'),
                W = function(n) {
                    if ("object" !== typeof n || !n || !Object.values(n).every((function(n) {
                            return "string" == typeof n
                        })) || Array.isArray(n)) return Q
                },
                X = K("itemData", 'must have required variables, for example: { "slug": "shoes" }'),
                H = function(n, e) {
                    try {
                        var r = j(n);
                        if (!r.every((function(n) {
                                return Boolean(e[n])
                            })) || !r.length) throw new Error
                    } catch (n) {
                        return X
                    }
                },
                Z = function(n) {
                    var e = n.key,
                        r = n.itemData;
                    return [J(e), W(r), H(e, r)].find(Boolean)
                },
                nn = function(n, e, r, t) {
                    void 0 === n && (n = {
                        main: []
                    }), void 0 === t && (t = {});
                    var i = Z({
                        key: e,
                        itemData: r
                    });
                    if (i) throw i;
                    var u = (Y(n, e) || {}).mapping,
                        a = (t || {}).baseUrl;
                    if (a = (a = null != a ? a : "").endsWith("/") ? null == a ? void 0 : a.slice(0, -1) : a, u && "string" == typeof u) {
                        var o = new RegExp(p, "g"),
                            l = u.replace(o, function(n) {
                                return function(e) {
                                    var r = new RegExp(s, "g"),
                                        t = e.replace(r, "");
                                    return null == n ? void 0 : n[t]
                                }
                            }(r));
                        return a.concat("/" + l)
                    }
                },
                en = function(n, e) {
                    void 0 === n && (n = ""), void 0 === e && (e = "");
                    try {
                        e && n.startsWith(e) && (n = n.replace(e, ""));
                        var r = new URL(n, d).pathname.replace(g, "");
                        return r ? decodeURIComponent(r).replace(g, "") : ""
                    } catch (n) {
                        return ""
                    }
                };

            function rn(n, e) {
                return tn(e) - tn(n)
            }
            var tn = function(n) {
                    var e = n.split("/");
                    return e.reduce((function(n, r, t) {
                        return n + (l.test(r) ? 0 : Math.pow(10, e.length - t))
                    }), 0)
                },
                un = function(n) {
                    return n ? Array.from(n.matchAll(new RegExp(p, "g")), (function(n) {
                        return n[1]
                    })) : []
                },
                an = function(n) {
                    var e = n.replace(new RegExp(p, "g"), f);
                    return RegExp("^" + e + "$")
                },
                on = function(n, e) {
                    var r = an(n),
                        t = null == e ? void 0 : e.match(r);
                    return t ? un(n).reduce((function(n, e, r) {
                        var i;
                        return (0, k.pi)((0, k.pi)({}, n), ((i = {})[e] = t[r + 1], i))
                    }), {}) : {}
                },
                pn = function(n, e) {
                    return void 0 === n && (n = []), n.find((function(n) {
                        return an(n).test(e)
                    }))
                },
                ln = function(n, e) {
                    void 0 === n && (n = {
                        main: []
                    });
                    var r = (Y(n, i.BLOG_POST) || {}).mapping;
                    if (null == r ? void 0 : r.includes(v.basicSlug)) {
                        var t = function(n, e) {
                            return void 0 === n && (n = []), n.findIndex((function(n) {
                                return an(n).test(e)
                            }))
                        }(v.regexes.map((function(n) {
                            return r.replace(c, n)
                        })), e);
                        if (!(t < 0)) {
                            var u = r.replace(c, v.mappings[t]),
                                a = on(u, e),
                                o = v.slugSegments.map((function(n) {
                                    return a[n]
                                })).filter((function(n) {
                                    return n
                                })).join("/"),
                                p = Object.keys(a).reduce((function(n, e) {
                                    return v.slugSegments.includes(e) || (n[e] = a[e]), n
                                }), {});
                            return (0, k.pi)((0, k.pi)({}, p), {
                                slug: o
                            })
                        }
                    }
                },
                sn = function(n, e) {
                    var r;
                    if (void 0 === n && (n = {
                            main: []
                        }), [{
                            key: i.BLOG_POST,
                            checker: ln
                        }].find((function(t) {
                            var i = t.key,
                                u = t.checker,
                                a = u(n, e);
                            return r = {
                                key: i,
                                segments: u(n, e) || {}
                            }, Boolean(a)
                        }))) return r
                },
                gn = K("url", "Url must be a string"),
                cn = function(n) {
                    if ("string" !== typeof n) return gn
                },
                fn = function(n) {
                    var e = n.url;
                    return [cn(e)].find(Boolean)
                },
                dn = function(n, e, r) {
                    var t;
                    void 0 === n && (n = {
                        main: []
                    }), void 0 === r && (r = {});
                    var i = fn({
                        url: e
                    });
                    if (i) throw i;
                    var u = r.baseUrl,
                        a = en(e, u),
                        o = sn(n, a);
                    if (o) return o;
                    var p = null === (t = null == n ? void 0 : n.main) || void 0 === t ? void 0 : t.map((function(n) {
                            return n.mapping || ""
                        })).sort(rn),
                        l = pn(p, a);
                    return l ? {
                        key: n.main.find((function(n) {
                            return n.mapping === l
                        })).key,
                        segments: on(l, a)
                    } : void 0
                },
                vn = function(n, e) {
                    return n.some((function(n) {
                        return n.key === e
                    }))
                },
                bn = function(n, e, r) {
                    var t, i, u;
                    void 0 === n && (n = {
                        main: []
                    });
                    var a = en(r),
                        o = (sn(n, a) || {}).key,
                        p = null === (t = null == n ? void 0 : n.main) || void 0 === t ? void 0 : t.map((function(n) {
                            return n.mapping || ""
                        })).sort(rn),
                        l = pn(p, a),
                        s = null === (u = null === (i = null == n ? void 0 : n.main) || void 0 === i ? void 0 : i.find((function(n) {
                            var e = n.mapping,
                                r = n.key;
                            return e === l || r === o
                        }))) || void 0 === u ? void 0 : u.pageIdentifier;
                    return s && e[s] || ""
                },
                _n = function(n, e) {
                    var r, t, i = C()[n] || {
                            required: ["slug"]
                        },
                        u = i.required,
                        a = i.defaultPrefix;
                    return e && "object" == typeof e && (e = null !== (t = null !== (r = e.publishedPrefix) && void 0 !== r ? r : e.savedPrefix) && void 0 !== t ? t : ""), (0, k.fl)([e, a], null == u ? void 0 : u.map((function(n) {
                        return "{{" + n + "}}"
                    }))).filter(Boolean).join("/")
                },
                mn = function(n) {
                    return Boolean(n) && "string" == typeof n
                },
                On = function(n, e) {
                    if (!mn(n) || !mn(e)) throw new Error("Mapping or subMappings are not defined");
                    if (!e.includes(U)) throw new Error("There is not main mapping pattern in the subMapping (" + U + ")");
                    return e.replace(U, n)
                },
                yn = function(n) {
                    if (!n) throw new Error("Can not get sub url mappings of invalid url mapping");
                    var e = n.key,
                        r = n.mapping,
                        t = n.pageIdentifier,
                        i = n.pageIdentifierType,
                        u = (D(e) || {}).subMappings;
                    return Object.entries(u || {}).map((function(n) {
                        var e = (0, k.CR)(n, 2),
                            u = e[0],
                            a = e[1];
                        return {
                            key: u,
                            mapping: On(r, null == a ? void 0 : a.defaultMapping),
                            pageIdentifier: t,
                            pageIdentifierType: i
                        }
                    }))
                },
                Mn = function(n) {
                    if ("string" != typeof n) return n;
                    var e = un(n);
                    return n.split(new RegExp(p, "g")).map((function(n) {
                        return e.includes(n) ? "{{" + n + "}}" : n.toLowerCase()
                    })).join("")
                },
                Tn = function(n) {
                    var e, r;
                    if (Array.isArray(n)) {
                        var t = {
                            main: []
                        };
                        try {
                            for (var i = (0, k.XA)(n), u = i.next(); !u.done; u = i.next()) {
                                var a = u.value,
                                    o = a.languageKey,
                                    p = a.urlMappings;
                                o && (t[o] = p)
                            }
                        } catch (n) {
                            e = {
                                error: n
                            }
                        } finally {
                            try {
                                u && !u.done && (r = i.return) && r.call(i)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        return t
                    }
                }
        }
    }
]);
//# sourceMappingURL=url-mapper-utils.7006045f.chunk.min.js.map